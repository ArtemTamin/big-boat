function notUseAttrValue(t,e){}function thousands(t,e){return t.split("").reverse().join("").replace(/\d{3}/g,"$&"+e).split("").reverse().join("")}function serializeAttrib(t,e){"use strict";var i=e.find(jQuery(".attrforprodid_"+t+" select, .attrforprodid_"+t+" input:radio")).serializeArray();jQuery(".attr_link").empty(),jQuery(".buy_link").empty(),jQuery.each(i,function(t,e){var i=e.name.split("jshop_attr_id")[1],n=e.name.split("-")[1],n=null===n||void 0===n?e.name:n;jQuery(".attr_link").append("&attr"+i+"="+e.value),jQuery(".buy_link").append("&"+n+"="+e.value)})}function addAttribToButtonBy(t,e){"use strict";jQuery("body").on("click",".button_buy",function(){var i=jQuery(this),n=i.closest(t),r=n.find(e).data("attrforprodid");jQuery(".buy_link").remove(),n.find(jQuery(".attrforprodid_"+r)).append("<div class='buy_link' style='display:none'></div>"),serializeAttrib(r,n),i.attr("href",function(t,e){return e+jQuery(".buy_link").text()})})}function showEmptyAlert(t,e,i,n){"use strict";i.find(n).append('<div class="attrib-empty-option"><div>'+e+" <span>&times;</span></div></div>");var r=i.find(n).position(),a=i.find(".attrib-empty-option").height();i.find(".attrib-empty-option").css({display:"block",top:r.top-a}).animate({opacity:1},500,function(){2==jQuery(n).data("autohide")&&setTimeout(function(){i.find(".attrib-empty-option").fadeOut("slow",function(){jQuery(this).remove()})},5e3)}),i.click(function(){i.find(".attrib-empty-option").fadeOut("slow",function(){jQuery(this).remove()})})}function hideButtonBuy(t,e,i){"use strict";2==jQuery(i).data("buttonbuy")?e.find(".button_buy:visible").hide("slow"):3==jQuery(i).data("buttonbuy")&&(e.find(".button_buy:visible").addClass("disable_buttonbuy"),jQuery("body").on("click",".disable_buttonbuy",function(t){t.preventDefault()}))}function showButtonBuy(t,e,i){"use strict";2==jQuery(i).data("buttonbuy")?e.find(".button_buy:hidden").show("slow"):3==jQuery(i).data("buttonbuy")&&e.find(".button_buy:visible").removeClass("disable_buttonbuy")}function mainAttrChange(t,e,i,n,r,a,o,d){"use strict";var u=t.parent("span").data("id"),s="id_"+u,c=t.closest(e),p=c.find(i).data("attrforprodid"),l=c.find("input[name^='quantity']")?c.find("input[name^='quantity']").val():"1";jQuery(".attr_link").remove(),jQuery(".buy_link").remove(),c.find(jQuery(".attrforprodid_"+p)).append("<div class='attr_link' style='display:none'></div><div class='buy_link' style='display:none'></div>"),serializeAttrib(p,c),jQuery.ajax({cache:!1,url:n+"index.php?option=com_jshopping&controller=product&task=ajax_attrib_select_and_price&product_id="+p+jQuery(".attr_link").text()+"&qty="+l+"&ajax=1&fid=afl",beforeSend:function(){},dataType:"json",ifModified:!0,success:function(e){for(var n in e)if(n===s&&e.hasOwnProperty(n)){var u=jQuery(e[n]).find("img");t.next("span").html(u)}if(0==e.displaybuttons?(showEmptyAlert(p,r,c,i),hideButtonBuy(p,c,i)):showButtonBuy(p,c,i),c.find(".jshop_price span, .modopprod_item_price span").text()!=e.price&&(c.find(".jshop_price, .modopprod_item_price").css("position","relative").append('<div class="ajaxloaddingcart_mini"></div>'),setTimeout(function(){jQuery(".ajaxloaddingcart_mini").remove()},500)),c.find(".qty_in_stock span").text(e.qty),e.images&&c.find(".image_block a img, .modopprod_item_image a img").attr("src",a+"thumb_"+e.images[0]).addClass("jshop_img"),e.block_image_middle){var y=c.find(".image_block a img").parent("a").html(e.block_image_middle);c.find(".image_block a").parent("a").html(y.find("img[id^='main_image_']").first()),y=c.find(".image_block a img").attr("src"),y&&(y=y.substring(y.lastIndexOf("/"),y.length).split("/")[1]),c.find(".image_block a img").attr("src",a+"thumb_"+y).addClass("jshop_img")}2===jQuery(i).data("calc")?setTimeout(function(){var t=parseFloat(e.pricefloat)*l,n=jQuery(i).data("currency"),r=jQuery(i).data("decimal"),a=jQuery(i).data("ths");c.find(".jshop_price span, .modopprod_item_price span").html(thousands(t.toFixed(r),a)+" "+n).fadeTo("fast",1)},700):setTimeout(function(){c.find(".jshop_price span, .modopprod_item_price span").html(e.price).fadeTo("fast",1)},700),c.find(".jshop_code_prod span").html(e.ean),c.find(".jshop_manufacturer_prod span").html(e.manufacturer_code),c.find(".productweight span").html(e.weight),c.find(".old_price span").length&&void 0!==e.oldprice?c.find(".old_price span").html(e.oldprice):!c.find(".old_price span").length&&c.find(".old_price_wrap").length&&void 0!==e.oldprice&&c.find(".old_price_wrap").html('<span class="old_price"><span>'+e.oldprice+"</span></span>"),jQuery.each(c.find(jQuery(".attr_arr")),function(){var t=jQuery(this),i=jQuery(this).data("id"),n=jQuery(this).data("attrprefix");c.find(jQuery(".attr_arr[data-id='"+i+"']")).html(e["id_"+i]),t.find(jQuery(".attr_arr[data-id='"+i+"'] input:radio")).removeAttr("onclick").attr({id:function(){return n+"_jshop_attr_id"+i+jQuery(this).val()},name:function(){return n+"-jshop_attr_id["+i+"]"}}),t.find(jQuery(".attr_arr[data-id='"+i+"'] label")).attr("for",function(){return n+"_jshop_attr_id"+i+jQuery(this).prev("input").val()}),t.find("select").removeAttr("onchange").removeAttr("id").attr("name",function(t,e){return n+"-"+e})}),serializeAttrib(p,c),c.find(".prod_attr_img img").not(".attrforprodid_"+p+" .prod_attr_img img").each(function(){jQuery(this).attr("src",o)}),(jQuery(".attr_noempty").length||jQuery(".noempty_0").length)&&(c.find("select").not(c.find("select")).each(function(){c.find("select [value='0']").length||jQuery(this).prepend(d)}),c.find(".prod_attr_img img").not(".attrforprodid_"+p+" .prod_attr_img img").each(function(){jQuery(this).attr("src",o)}))},error:function(){jQuery(".ajaxloaddingcart_mini").remove()}}).done(function(){}),jQuery("#jshop_module_cart_mini").length&&jQuery("*[id^='jshop_module_cart_mini']").length||jQuery("body").on("click",c.find(jQuery(".button_buy")),function(){jQuery(this).attr("href",function(t,e){return e+jQuery(".buy_link").text()})})}function runAttribAjax(){var t=".attrib",e=jQuery(t).data("wrapclass"),i=jQuery(t).data("uri-base"),n=".count.p_p, .count.p_m, .list_product input.product_plus, .list_product input.product_minus",r=".list_product input[name^='quantity'], .modopprod_item input[name^='quantity']",a=jQuery(t).data("text"),o=jQuery(t).data("textsel"),d='<option value="0" selected="selected">'+o+"</option>",u=i+"components/com_jshopping/files/img_products/",s=i+"components/com_jshopping/images/blank.gif";jQuery(".jshop.list_product:hidden").find(t).remove(),jQuery(t).data("fe")||jQuery(".noempty_1").length||(jQuery(t+" input:radio").each(function(){jQuery(this).removeAttr("checked","checked")}),jQuery(t+" select").each(function(){jQuery(this).find("option:selected").removeAttr("selected","selected"),jQuery(this).prepend(d)}),jQuery(t+" .prod_attr_img img").each(function(){jQuery(this).attr("src",s)})),jQuery(t).data("fe")&&jQuery(".noempty_1").length&&(jQuery(t+" select").each(function(){jQuery(this).find("option:selected").remove()}),jQuery(".att_none span.attr_arr").each(function(){jQuery(this).find("select option:nth-child(1)").attr("selected","selected"),jQuery(this).find("input:radio").eq(0).attr("checked","checked")})),jQuery("body").on("click",n,function(){var t=jQuery(this);t.parents("div.block_product").find(".jshop_price span").fadeTo("fast",.01),setTimeout(function(){t.parents("div.count_block, div.block_product").find("input[name^='quantity']").change()},500)}),jQuery("body").on("keyup",r,function(){var t=jQuery(this);t.parents("div.block_product").find(".jshop_price span").fadeTo("fast",.01).trigger("click"),setTimeout(function(){t.parents("div.count_block, div.block_product").find("input[name^='quantity']").change()},500),t.parents("div.block_product, .modopprod_item").find(".button_buy").hover(function(){jQuery(this).focus()})}),jQuery("body").on("change",r,function(){var n=jQuery(this);mainAttrChange(n,e,t,i,a,u,s,d)}),jQuery(t).length&&jQuery("body").on("change",t+" select, "+t+" input",function(){mainAttrChange(jQuery(this),e,t,i,a,u,s,d)}),jQuery("#jshop_module_cart_mini").length||jQuery("*[id^='jshop_module_cart_mini']").length||addAttribToButtonBy(e,t),jQuery(".jshop.list_product").is(":hidden")&&jQuery(".attrib").data("fe")&&jQuery(".att_none span.attr_arr").each(function(){jQuery(this).find("select option:nth-child(1)").attr("selected","selected"),jQuery(this).find("input:radio").eq(0).attr("checked","checked")})}jQuery(function(){"use strict";runAttribAjax(),jQuery(".recalc_attr .attr_arr select, .recalc_attr .attr_arr input").change()});